<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Time</title>
</head>
<body>
<button id="myButton">Annuler le compte à rebours</button>

    <script>
        (function() {

            var button = document.getElementById('myButton'),
                timeLeft = 5;

            var timerID = setTimeout(function() { // On crée notre compte à rebours
                clearInterval(intervalID);
                button.innerHTML = "Annuler le compte à rebours (0s)";
                alert("Vous n'êtes pas très réactif vous !");
            }, 5000);

            var intervalID = setInterval(function() { // On met en place l'intervalle pour afficher la progression du temps
                button.innerHTML = "Annuler le compte à rebours (" + --timeLeft + "s)";
            }, 1000);

            button.addEventListener('click', function() {
                clearTimeout(timerID); // On annule le compte à rebours
                clearInterval(intervalID); // Et l'intervalle
                alert("Le compte à rebours a bien été annulé.");
            });

        })();

        //Animation with timeout for opocity
        var myImg = document.getElementById('myImg');

        function anim() {

            var s = myImg.style,
                result = s.opacity = parseFloat(s.opacity) - 0.1;

            if (result > 0.2) {
                setTimeout(anim, 50); // La fonction anim() fait appel à elle-même si elle n'a pas terminé son travail
            }

        }

        anim(); // Et on lance la première phase de l'animation
    </script>
</body>
</html>
